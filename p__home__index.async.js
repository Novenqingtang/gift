"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[512],{45896:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=n(5574),i=n.n(r),s=n(67294),c=n(54647),a=n(13448),o=n(84908),u=n(71577),l=n(11382),f=n(14538),d=n(24969),p=n(53826),m=n(66703),x=n(81268),h=n(85893);function v(e){var t=e.gift,n=t.id,r=t.name,i=t.imageId,c=t.is_empty,a=void 0!==c&&c,o=e.onClick,u=(0,s.useMemo)((function(){return n.toString()}),[n]),l=(0,s.useMemo)((function(){return i.toNumber()}),[i]);return(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"w-full flex justify-center items-center  border  border-solid border-slate-200 cursor-pointer ",onClick:o,children:(0,h.jsx)(p.Z,{className:"w-full h-18.75 object-cover",preview:!1,src:x.c[l]||"",fallback:m})}),(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("div",{children:u}),(0,h.jsx)("div",{children:"to ".concat(r||"unknown")})]}),a&&(0,h.jsx)("div",{className:"absolute top-0 right-0 font-bold text-1 text-[#ffec3d]",children:"Empty"})]})}var g=n(77985),b=n(20661),j=n(13455),w=n(14652),k=n(15009),y=n.n(k),N=n(99289),C=n.n(N),I=n(55375),S=n(23803),Z=n(18133),M=n(49006),A=new(n(56446).ZP);var G=n(13290);function O(e){var t=e.onClick,n=e.chain;return(0,h.jsx)("div",{className:"mt-8 flex items-center justify-center",children:(0,h.jsxs)("div",{className:" px-1 py-1 cursor-pointer bg-[#ffadd2] text-[#fff] rounded-1 hover:bg-[#f759ab]",onClick:function(){t(n)},children:["Switch to ",j.Iy[n]]})})}function B(e){var t=e.onClick;return(0,h.jsx)("div",{className:"mt-8 flex items-center justify-center",children:(0,h.jsx)("div",{className:" px-1 py-1 cursor-pointer bg-[#ffadd2] text-[#fff] rounded-1 hover:bg-[#f759ab]",onClick:function(){t()},children:"Connect Wallet"})})}var E=function(){var e=(0,g.useWeb3React)(),t=e.chainId,n=e.account,r=e.provider,p=e.isActive,m=(0,b.bt)(t),x=(0,w.Z)(),k=function(){var e=(0,g.useWeb3React)(),t=e.chainId,n=e.account,r=e.provider,c=e.connector,a=(0,s.useState)([]),o=i()(a,2),u=o[0],l=o[1],f=(0,s.useState)(!0),d=i()(f,2),p=d[0],m=d[1],x=function(){var e=C()(y()().mark((function e(){var i,s,c,a,o,u,l,f,d;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&r){e.next=2;break}return e.abrupt("return",[]);case 2:return i=(0,M.u)(I.x,S,r,n),e.next=5,i.balanceOf(n);case 5:return s=e.sent,c=new Array(s.toNumber()).fill(0).map((function(e,t){return{address:I.x,abi:S,method:"tokenOfOwnerByIndex",params:[n,t]}})),e.next=9,A.call({chainId:t,provider:r,calls:c,isStrict:!1});case 9:return a=e.sent,o=a.map((function(e){return{address:I.IL,abi:Z,method:"getBox",params:[e]}})),e.next=13,A.call({chainId:t,provider:r,calls:o,isStrict:!1});case 13:return u=e.sent,l=a.map((function(e){return{address:I.IL,abi:Z,method:"getBoxAssets",params:[e]}})),e.next=17,A.call({chainId:t,provider:r,calls:l,isStrict:!1});case 17:return f=e.sent,d=u.map((function(e,t){return{id:e.id,name:e.name,message:e.message,imageId:e.imageId,festival:e.festival,canOpenAfter:e.canOpenAfter,is_empty:"0x"===f[t]||!f[t].length}})),e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=C()(y()().mark((function e(){var t;return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,x();case 3:t=e.sent,l(t),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=C()(y()().mark((function e(){return y()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l([]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=!0;return p||m(!0),C()(y()().mark((function i(){var s;return y()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t&&(0,j.IM)(t)&&n&&c&&r){i.next=3;break}return e&&(v(),m(!1)),i.abrupt("return");case 3:return i.prev=3,i.next=6,x();case 6:s=i.sent,e&&l(s),i.next=12;break;case 10:i.prev=10,i.t0=i.catch(3);case 12:return i.prev=12,e&&m(!1),i.finish(12);case 15:case"end":return i.stop()}}),i,null,[[3,10,12,15]])})))(),function(){e=!1}}),[t,n,c,r]),{isFetchingGifts:p,gifts:u,clearGifts:v,refresGifts:h}}(),N=k.isFetchingGifts,E=k.gifts,F=k.refresGifts,W=(0,c.useModel)("accountDrawerModel").toggleAccountDrawer,D=(0,s.useState)(!1),L=i()(D,2),R=L[0],_=L[1];if(!t)return null;var z=!!n,P=!!m&&(0,j.IM)(t);(0,s.useEffect)((function(){_(!1)}),[t,n,r,p]);return(0,h.jsxs)("div",{className:"pt-2 px-0.5 sm:px-0 ",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,h.jsx)("div",{className:"text-1.25 font-bold",children:"My Gift Boxes"}),(0,h.jsx)(o.Z,{title:P?"":"Switch to mainnet",placement:"top",children:(0,h.jsx)(u.Z,{type:"primary",size:"middle",icon:(0,h.jsx)(d.Z,{}),disabled:!P,onClick:function(){_(!0)},children:"New"})})]}),z?P?(0,h.jsx)(l.Z,{spinning:N,children:(0,h.jsx)("div",{className:"relative min-h-[500px]",children:E.length?(0,h.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-3 lg:gap-1.5 md:grid-cols-2 md:gap-1.25 ",children:E.map((function(e){return(0,h.jsx)(v,{gift:e,onClick:function(){!function(e){if(!P)return a.Z.warning({duration:3,message:"Error Chain",description:"Application is not support current chain, please switch to Mainnet."});var n=j.Iy[t];c.history.push("/".concat(n,"/").concat(e))}(e.id.toString())}},e.id.toString())}))}):N?(0,h.jsx)(h.Fragment,{}):(0,h.jsx)("div",{className:"text-center text-1.25 pt-5 text-[#ff85c0]",children:"No gifts, new a gift now"})})}):(0,h.jsx)(O,{onClick:function(e){x(e)},chain:j.u3[0]}):(0,h.jsx)(B,{onClick:W}),(0,h.jsx)(f.Z,{title:"New Gift",open:R,footer:null,maskClosable:!1,closeIcon:(0,h.jsx)(h.Fragment,{}),destroyOnClose:!0,keyboard:!1,children:(0,h.jsx)(G.Z,{gifts:E,cancel:function(){_(!1)},submit:function(){_(!1),F()}})})]})}}}]);